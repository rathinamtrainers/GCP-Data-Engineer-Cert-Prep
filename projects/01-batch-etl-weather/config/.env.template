# Project 1: Weather ETL Pipeline - Configuration Template
#
# INSTRUCTIONS:
# 1. Copy this file to .env in the same directory
# 2. Fill in your actual values (especially OPENWEATHER_API_KEY)
# 3. NEVER commit .env to version control!

# ============================================================================
# GCP Project Configuration
# ============================================================================

GCP_PROJECT_ID=data-engineer-475516
GCP_REGION=us-central1
GCP_ZONE=us-central1-a

# ============================================================================
# Cloud Storage Buckets
# ============================================================================

# Raw data bucket (stores JSON from API)
RAW_BUCKET=data-engineer-475516-weather-raw

# Staging bucket (for Dataflow staging files)
STAGING_BUCKET=data-engineer-475516-weather-staging

# Temp bucket (for Dataflow temp files, auto-deleted after 7 days)
TEMP_BUCKET=data-engineer-475516-weather-temp

# ============================================================================
# BigQuery Configuration
# ============================================================================

BIGQUERY_DATASET=weather_data
BIGQUERY_TABLE=daily
BIGQUERY_LOCATION=US

# ============================================================================
# Dataflow Configuration
# ============================================================================

DATAFLOW_STAGING_LOCATION=gs://data-engineer-475516-weather-staging/dataflow/staging
DATAFLOW_TEMP_LOCATION=gs://data-engineer-475516-weather-temp/dataflow/temp
DATAFLOW_SERVICE_ACCOUNT=dataflow-runner@data-engineer-475516.iam.gserviceaccount.com

# Dataflow job settings
DATAFLOW_MAX_WORKERS=2
DATAFLOW_MACHINE_TYPE=n1-standard-1
DATAFLOW_DISK_SIZE_GB=30

# ============================================================================
# OpenWeather API Configuration
# ============================================================================

# Get your API key from: https://openweathermap.org/api
# Sign up for free tier (60 calls/minute)
OPENWEATHER_API_KEY=YOUR_API_KEY_HERE

# API endpoint
OPENWEATHER_BASE_URL=https://api.openweathermap.org/data/2.5/weather

# Cities to fetch weather for (comma-separated, no spaces)
# Use city names as they appear in OpenWeather API
CITIES=London,Paris,NewYork,Tokyo,Sydney,Mumbai,Singapore,Dubai,Berlin,Toronto

# ============================================================================
# Service Accounts
# ============================================================================

DEV_SERVICE_ACCOUNT=dev-data-engineer@data-engineer-475516.iam.gserviceaccount.com
DATAFLOW_SERVICE_ACCOUNT=dataflow-runner@data-engineer-475516.iam.gserviceaccount.com

# ============================================================================
# Pipeline Configuration
# ============================================================================

# How many days of historical data to backfill (if needed)
BACKFILL_DAYS=7

# Batch size for API calls
BATCH_SIZE=10

# Retry settings
MAX_RETRIES=3
RETRY_DELAY_SECONDS=5

# ============================================================================
# Cloud Composer (Airflow) - Optional
# ============================================================================

COMPOSER_ENVIRONMENT=weather-composer
COMPOSER_LOCATION=us-central1

# DAG schedule (cron format)
# Default: Daily at 6:00 AM UTC
DAG_SCHEDULE=0 6 * * *

# ============================================================================
# Development Settings
# ============================================================================

ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO

# Local testing
LOCAL_DATA_DIR=./data
LOCAL_OUTPUT_DIR=./output
